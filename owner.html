<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>One Click Polis | Данные для расчёта</title>
    <link rel="shortcut icon" href="./images/logo.ico" type="image/x-icon">
    <link rel="stylesheet" href="./sources/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/suggestions-jquery@21.12.0/dist/css/suggestions.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="./sources/general-styles.css">
</head>
<style>
    .wrapper {
        max-width: 942px;
    }
</style>
<body>

<div class="container d-flex justify-content-center">
    <div class="wrapper d-flex flex-column align-items-center mt-5 mb-3">
        <div class="pageBar text-center">
            <h4>Данные для расчёта</h4>
            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                <ol class="breadcrumb justify-content-center">
                    <li class="breadcrumb-item" aria-current="page">Водители</li>
                    <li class="breadcrumb-item active">Собственник</li>
                    <li class="breadcrumb-item" aria-current="page">Подтверждение данных</li>
                </ol>
            </nav>
            <div class="alert alert-warning text-start mx-auto" role="alert">
                <i class="bi bi-check-circle"></i> Эти данные будут переданы в страховые компании, чтобы максимально
                точно рассчитать цены и учесть все скидки.
            </div>
        </div>
        <form method="post" action="./dataConfirmation.html" class="needs-validation w-100" novalidate>
            <h4 class="my-5 text-center">Данные собственника</h4>
            <div class="row g-3 mb-3">
                <div class="col-lg-4 col-12">
                    <label for="last_name" class="form-label">Фамилия</label>
                    <input required type="text" id="last_name" name="last_name" class="form-control" placeholder="Иванов">
                </div>
                <div class="col-lg-4 col-12">
                    <label for="first_name" class="form-label">Имя</label>
                    <input required type="text" id="first_name" name="first_name" class="form-control" placeholder="Иван">
                </div>
                <div class="col-lg-4 col-12">
                    <label for="patronymic" class="form-label">Отчество</label>
                    <input required type="text" id="patronymic" name="patronymic" class="form-control" placeholder="Иванович">
                </div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-lg-4 col-12">
                    <label for="gender" class="form-label">Пол</label>
                    <select id="gender" name="gender" class="form-select">
                        <option value="M" selected>Мужской</option>
                        <option value="F">Женский</option>
                    </select>
                </div>
                <div class="col-lg-4 col-12">
                    <label for="birth_date" class="form-label">Дата рождения</label>
                    <input required type="text" id="birth_date" name="birth_date" class="form-control" placeholder="dd.mm.yyyy">
                </div>
                <div class="col-lg-4 col-12">
                    <label for="credential_numbers" class="form-label">Серия и номер паспорта</label>
                    <input required type="text" id="credential_numbers" name="credential_numbers" class="form-control"
                           placeholder="1234 567890">
                </div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-lg-4 col-12">
                    <label for="credential_issue_date" class="form-label">Дата выдачи</label>
                    <input required type="text" id="credential_issue_date" name="credential_issue_date" placeholder="dd.mm.yyyy"
                           class="form-control">
                </div>
                <div class="col-lg-4 col-12">
                    <label for="credential_issue_point" class="form-label">Код подразделения</label>
                    <input required type="text" id="credential_issue_point" name="credential_issue_point"
                           class="form-control" placeholder="123 456">
                </div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-lg-8 col-12">
                    <label for="address_query_street" class="form-label">Адрес регистрации (город, улица)</label>
                    <input required type="text" id="address_query_street" name="address_query_street"
                           class="form-control" placeholder="г. Москва, ул. Онежская">
                </div>
                <div class="col-lg-4 col-12">
                    <label for="address_additional" class="form-label">Номер <label
                            for="address_query_house">дома</label>/<label
                            for="address_query_flat">квартиры</label></label>
                    <div class="input-group" id="address_additional">
                        <input required type="text" id="address_query_house" name="address_query_house"
                               class="form-control"
                               placeholder="Дом">
                        <input type="text" id="address_query_flat" name="address_query_flat" class="form-control"
                               placeholder="Квартира" required>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="no_flat">
                        <label class="form-check-label" for="no_flat">
                            Нет квартиры
                        </label>
                    </div>
                </div>
            </div>
            <div class="alert alert-warning">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" checked>
                    <label class="form-check-label" for="flexCheckDefault">
                        Страхователь совпадает с собственником
                    </label>
                </div>
                <div class="alertBox" style="display: none">
                    <p class="mt-3">
                        Страхователь - это человек, который оформляет страховой полис и в будущем получает доступ к
                        внесению изменений, в том числе к расторжению полиса. По закону страхователь должен быть
                        добавлен в список водителей или быть собственником автомобиля. Рекомендуем указывать
                        страхователем собственника - это может влиять на стоимость полиса.
                    </p>
                    <div class="row g-3 mb-3">
                        <div class="col-lg-4 col-12">
                            <label for="insurance_last_name" class="form-label">Фамилия</label>
                            <input type="text" id="insurance_last_name" name="insurance_last_name" class="form-control" placeholder="Иванов">
                        </div>
                        <div class="col-lg-4 col-12">
                            <label for="insurance_first_name" class="form-label">Имя</label>
                            <input type="text" id="insurance_first_name" name="insurance_first_name"
                                   class="form-control" placeholder="Иван">
                        </div>
                        <div class="col-lg-4 col-12">
                            <label for="insurance_patronymic" class="form-label">Отчество</label>
                            <input type="text" id="insurance_patronymic" name="insurance_patronymic"
                                   class="form-control" placeholder="Иванович">
                        </div>
                    </div>
                    <div class="row g-3 mb-3">
                        <div class="col-lg-4 col-12">
                            <label for="insurance_gender" class="form-label">Пол</label>
                            <select id="insurance_gender" name="insurance_gender" class="form-select">
                                <option value="M" selected>Мужской</option>
                                <option value="F">Женский</option>
                            </select>
                        </div>
                        <div class="col-lg-4 col-12">
                            <label for="insurance_birth_date" class="form-label">Дата рождения</label>
                            <input type="text" id="insurance_birth_date" name="insurance_birth_date" placeholder="dd.mm.yyyy"
                                   class="form-control">
                        </div>
                        <div class="col-lg-4 col-12">
                            <label for="insurance_credential_numbers" class="form-label">Серия и номер паспорта</label>
                            <input type="text" id="insurance_credential_numbers" name="insurance_credential_numbers"
                                   class="form-control" placeholder="1234 567890">
                        </div>
                    </div>
                    <div class="row g-3 mb-3">
                        <div class="col-lg-4 col-12">
                            <label for="insurance_credential_issue_date" class="form-label">Дата выдачи</label>
                            <input type="text" id="insurance_credential_issue_date" placeholder="dd.mm.yyyy"
                                   name="insurance_credential_issue_date" class="form-control">
                        </div>
                        <div class="col-lg-4 col-12">
                            <label for="insurance_credential_issue_point" class="form-label">Код подразделения</label>
                            <input type="text" id="insurance_credential_issue_point"
                                   name="insurance_credential_issue_point" class="form-control" placeholder="123 456">
                        </div>
                    </div>
                    <div class="row g-3 mb-3">
                        <div class="col-lg-8 col-12">
                            <label for="insurance_address_query_street" class="form-label">Адрес регистрации (город,
                                улица)</label>
                            <input type="text" id="insurance_address_query_street" name="insurance_address_query_street"
                                   class="form-control" placeholder="г. Москва, ул. Онежская">
                        </div>
                        <div class="col-lg-4 col-12">
                            <label for="address_additional" class="form-label">Номер <label
                                    for="insurance_address_query_house">дома</label>/<label
                                    for="insurance_address_query_flat">квартиры</label></label>
                            <div class="input-group" id="insurance_address_additional">
                                <input type="text" id="insurance_address_query_house"
                                       name="insurance_address_query_house"
                                       class="form-control"
                                       placeholder="Дом">
                                <input type="text" id="insurance_address_query_flat" name="insurance_address_query_flat"
                                       class="form-control"
                                       placeholder="Квартира">
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="insurance_no_flat">
                                <label class="form-check-label" for="insurance_no_flat">
                                    Нет квартиры
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <h4>Контактные данные</h4>
            <p>Телефон нужен для получения кода подтверждения и расчёта ОСАГО, а на указанную почту мы вышлем готовый
                полис</p>
            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" value="" id="agreesWithInfo" checked>
                <label class="form-check-label" for="agreesWithInfo">
                    Согласен с <a
                        href="https://www.sravni.ru/promo/soglasie-na-obrabotku-personalnyh-dannyh/?extern_browser=true"
                        class="text-decoration-none" target="_blank">правилами предоставления информации</a>
                </label>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-lg-auto col-12">
                    <label for="contact_type_email" class="form-label">Электронная почта</label>
                    <input type="text" id="contact_type_email"
                           name="contact_type_email" class="form-control" placeholder="example@gmail.com" required>
                </div>
                <div class="col-lg-auto col-12">
                    <label for="contact_type_phone" class="form-label">Телефон</label>
                    <input type="text" id="contact_type_phone"
                           name="contact_type_phone" class="form-control" placeholder="+7 (123) 456 78 90" required>
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <button type="button" name="back" class="btn btn-outline-secondary">Назад</button>
                <button type="submit" name="next" class="btn btn-success">Продолжить</button>
            </div>
        </form>
    </div>
</div>


<script src="./sources/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="./sources/jquery/js/jquery-3.6.1.min.js"></script>
<script src="./sources/jquery-mask/jquery.inputmask.min.js"></script>
<script src="./sources/store2/store2.min.js"></script>
<script src="./sources/jquery.suggestions/jquery.suggestions.min.js"></script>
<script src="./scripts/dadata.js"></script>
<script src="./scripts/localStorageControllers/owner.js"></script>
<script>
    $(document).ready(() => {
        //Маски для полей ввода
        $('input[name=credential_numbers],input[name=insurance_credential_numbers]').inputmask({
            "mask": "9999 999999",
            placeholder: "1234 567890",
            clearMaskOnLostFocus: true
        });

        $('input[name=credential_issue_point],input[name=insurance_credential_issue_point]').inputmask({
            "mask": "999 999",
            placeholder: "123 456",
            clearMaskOnLostFocus: true
        });

        $('input[name=contact_type_email]').inputmask({
            alias: "email",
            jitMasking: true,
            showMaskOnFocus: false,
            showMaskOnHover: false
        });

        $('input[name=contact_type_phone]').inputmask({
            "mask": "+7 (999) 999 99 99",
            placeholder: "+7 (123) 456 78 90",
            clearMaskOnLostFocus: true
        });

        $('#credential_issue_date, #birth_date, #insurance_birth_date, #insurance_credential_issue_date').inputmask({
            alias: "datetime",
            inputFormat: "dd.mm.yyyy",
            outputFormat: "yyyy-mm-dd",
            clearIncomplete: true
        });

        //Чекбоксы
        $('#flexCheckDefault').click(() => {
            $('.alert .alertBox').slideToggle('slow');
            $('.alert .alertBox').find('input').each(function (index, element) {
                $(element).prop('required', !$(element).prop('required'));
            });
        });

        $('#agreesWithInfo').click(() => {
            $('button[type=submit]').toggleClass('disabled');
        });

        $('#no_flat').click(() => {
            let flatInput = $('input[name=address_query_flat]');
            flatInput.prop('disabled', !flatInput.prop('disabled'));
            flatInput.prop('required', !flatInput.prop('required'));
        })

        $('#insurance_no_flat').click(() => {
            let flatInput = $('input[name=insurance_address_query_flat]');
            flatInput.prop('disabled', !flatInput.prop('disabled'));
            flatInput.prop('required', !flatInput.prop('required'));
        })

        //Кнопки перехода по страницам
        $('button[name=back]').click(() => {
            window.location.href = './drivers.html';
        });

        $('.needs-validation').submit(function (e) {
            toggleInputs(false);
            if (!this.checkValidity()) {
                scrollToInvalidInput();
            }
            $(this).addClass('was-validated');
            e.preventDefault();
            e.stopPropagation();
            if (this.checkValidity()) {
                window.location.href = './dataConfirmation.html';
            }
        });

        function scrollToInvalidInput() {
            $('html, body').animate({
                scrollTop: $('.form-control:invalid').first().offset().top-$(window).height()/2
            }, 250);
        }

        function toggleInputs(value) {
            $('.form-control').each(function () {
                $(this).prop("disabled", value);
            });

            $('select').each(function () {
                $(this).prop("disabled", value);
            });
        }
    });
</script>

</body>
</html>